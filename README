Barrier implementation based on a Reader/Writer Lock, a mutex and a counter.

